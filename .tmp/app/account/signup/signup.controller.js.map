{"version":3,"sources":["../../../../client/app/account/signup/signup.controller.js"],"names":[],"mappings":"AAAA;;;;;;IAEM;;;AAOJ,WAPI,gBAOJ,CAAY,IAAZ,EAAkB,SAAlB,EAA6B;0BAPzB,kBAOyB;;SAL7B,OAAO,GAKsB;SAJ7B,SAAS,GAIoB;SAH7B,YAAY,MAGiB;;AAC3B,SAAK,IAAL,GAAY,IAAZ,CAD2B;AAE3B,SAAK,SAAL,GAAiB,SAAjB,CAF2B;GAA7B;;;;eAPI;;6BAYK,MAAM;;;AACb,WAAK,SAAL,GAAiB,IAAjB,CADa;;AAGb,UAAI,KAAK,MAAL,EAAa;AACf,aAAK,IAAL,CAAU,UAAV,CAAqB;AACnB,gBAAM,KAAK,IAAL,CAAU,IAAV;AACN,iBAAO,KAAK,IAAL,CAAU,KAAV;AACP,oBAAU,KAAK,IAAL,CAAU,QAAV;SAHZ,EAKC,IALD,CAKM,YAAM;;AAEV,gBAAK,SAAL,CAAe,IAAf,CAAoB,GAApB,EAFU;SAAN,CALN,CASC,KATD,CASO,eAAO;AACZ,gBAAM,IAAI,IAAJ,CADM;AAEZ,gBAAK,MAAL,GAAc,EAAd;;;AAFY,cAKR,IAAI,IAAJ,EAAU;AACZ,oBAAQ,OAAR,CAAgB,IAAI,MAAJ,EAAY,iBAAS;AACnC,mBAAK,KAAL,EAAY,YAAZ,CAAyB,UAAzB,EAAqC,KAArC,EADmC;AAEnC,oBAAK,MAAL,CAAY,KAAZ,IAAqB,IAAI,OAAJ,CAFc;aAAT,CAA5B,CADY;WAAd;SALK,CATP,CADe;OAAjB;;;;SAfE;;;AAyCN,QAAQ,MAAR,CAAe,oBAAf,EACG,UADH,CACc,kBADd,EACkC,gBADlC","file":"signup.controller.js","sourcesContent":["'use strict';\n\nclass SignupController {\n  //start-non-standard\n  user = {};\n  errors = {};\n  submitted = false;\n  //end-non-standard\n\n  constructor(Auth, $location) {\n    this.Auth = Auth;\n    this.$location = $location;\n  }\n\n  register(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.createUser({\n        name: this.user.name,\n        email: this.user.email,\n        password: this.user.password\n      })\n      .then(() => {\n        // Account created, redirect to home\n        this.$location.path('/');\n      })\n      .catch(err => {\n        err = err.data;\n        this.errors = {};\n\n        // Update validity of form fields that match the sequelize errors\n        if (err.name) {\n          angular.forEach(err.fields, field => {\n            form[field].$setValidity('mongoose', false);\n            this.errors[field] = err.message;\n          });\n        }\n      });\n    }\n  }\n}\n\nangular.module('spirit99StationApp')\n  .controller('SignupController', SignupController);\n"]}